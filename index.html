<!doctype html>
<html>

<head>
    <link rel="manifest" href="manifest.json">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="5827 Scouting">
    <link rel="apple-touch-icon" href="/icon/icon-512x512.png">
</head>



<a href="import.html"> Scanner </a>
<br>
<a href="export.html"> QR Maker </a>
<br>
<br>
<button id="install" onclick="install()">install</button>
<br>
<p>Build: 2201HR 10/12 22</p>

<script src="service-worker.js"></script>
<script src="a.js"></script>
<script>
    //var btnAdd = document.getElementById("install");
    if ('serviceWorker' in navigator) {
        // Use the window load event to keep the page load performant
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js').then(function () { console.log("SW registered") });
        });
    }


    let deferredPrompt = null;

    window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
    });

    async function install() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            console.log(deferredPrompt)
            deferredPrompt.userChoice.then(function (choiceResult) {

                if (choiceResult.outcome === 'accepted') {
                    console.log('Your PWA has been installed');
                } else {
                    console.log('User chose to not install your PWA');
                }

                deferredPrompt = null;

            });


        }
    }
</script>

</html>