<!doctype html>
<html>

<head>
    <link rel="manifest" href="manifest.json">
</head>

<script src="service-worker.js"></script>

<a href="import.html"> Scanner </a>
<br>
<a href="export.html"> QR Maker </a>
<br>
<br>
<a href="" id="install">install</a>
<br>
<p>Build: 2046HR 10/9 1G</p>


<script>
    var btnAdd = document.getElementById("install");
    if ('serviceWorker' in navigator) {
        // Use the window load event to keep the page load performant
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js').then(function () { console.log("SW registered") });
        });
    }
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
        // Stash the event so it can be triggered later.
        deferredPrompt = e;

        // Update UI notify the user they can add to home screen
        btnAdd.style.display = 'block';
    });

    btnAdd.addEventListener('click', (e) => {
        // hide our user interface that shows our A2HS button
        btnAdd.style.display = 'none';
        // Show the prompt
        deferredPrompt.prompt();
        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice
            .then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the A2HS prompt');
                } else {
                    console.log('User dismissed the A2HS prompt');
                }
                deferredPrompt = null;
            });
    });
</script>

</html>